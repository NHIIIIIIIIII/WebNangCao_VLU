<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo">PETSHOP</div>
        <ul>
            <li><a href="/">Trang chủ</a></li>
            <li><a href="/products">Sản phẩm</a></li>
            <li><a href="/cart">Giỏ hàng</a></li>
        </ul>
    </nav>

    <section class="cart">
        <h1>Giỏ hàng</h1>
        <% if (cart && cart.products && cart.products.length > 0) { %>
            <ul>
                <% cart.products.forEach(item => { %>
                    <li class="cart-item">
                        <% if (item.productId) { %>
                            <img src="<%= item.productId.image %>" alt="<%= item.productId.name %>" onerror="this.src='/images/default.jpg';">
                            <div class="cart-item-details">
                                <h3><%= item.productId.name %></h3>
                                <p>Giá: <%= item.productId.price %> VND</p>
                                <p>Số lượng: <%= item.quantity %></p>
                                <form action="/cart/remove/<%= item.productId._id %>" method="POST" style="display:inline;">
                                    <button type="submit" class="btn btn-danger">Xóa</button>
                                </form>
                            </div>
                        <% } %>
                    </li>
                <% }); %>
            </ul>
            <form action="/cart/clear" method="POST" style="margin-top: 20px; text-align: center;">
                <button type="submit" class="btn btn-warning" onclick="return confirm('Bạn có chắc chắn muốn xóa tất cả sản phẩm trong giỏ hàng?');">Xóa tất cả</button>
            </form>
        <% } else { %>
            <p>Giỏ hàng của bạn trống.</p>
        <% } %>
    </section>

    <footer class="footer">
        <p>© 2025 PetShop - All Rights Reserved</p>
    </footer>
</body>
</html>